@using System.Net.Configuration
@model SaveTheKolache.Models.CampaignViewModelList
@{
    ViewBag.Title = "Campaigns";
}

<h2>Campaigns</h2>

<p>
    @if (Request.IsAuthenticated && User.IsInRole("Admin"))
    {
        @Html.ActionLink("Create New", "Create")
    }
</p>
<form method="post">@Html.DropDownList("CampaignID", Model.Campaigns) <input type="submit" value="Go"/>
</form>
@Html.ActionLink("Refresh View", "Index", "Campaign")
<br />
<table class="table table-bordered table-striped">
    <tr>
        <th>
           Campaign Name
        </th>
        <th>
            Category
        </th>
        <th>
            Users Signed Up
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.CampaignViewModels) {
    <tr>
        <td>
            @item.CampaignName
        </td>
        <td>
            @item.Category
        </td>
        <td>
            @item.UsersSignedUp
        </td>
        <td>
            @if (Request.IsAuthenticated && User.IsInRole("Admin"))
            {
                @Html.ActionLink("Edit", "Edit", new {id = item.CampaignID}) 
            }|
            @Html.ActionLink("Details", "Details", new {id = item.CampaignID}) |
            <button class="btn btn-info" type="button" id="addressSearch" value="Sign Up"   
                    onclick="location.href = '@Url.Action("Sign", "SignUpList", new{id = item.CampaignID})'"/>
        </td>
    </tr>
    <tr @if (Model.IsHidden)
        {
        @:class="hidden"

        }>
        <td><h4>
            Campaign Details
        </h4> @item.CampaignInfo</td>
        <td colspan="3">
            <table class="table table-bordered table-striped" width="100%">
                <h4>Users Signed Up For Event</h4>
                @foreach (var signed in item.SignUpLists)
                {
                    <tr>
                        <td>
                            @signed.LastName, @signed.FirstName
                        </td>
                    </tr>
                }
            </table>
        </td>
    </tr>
}

</table>
